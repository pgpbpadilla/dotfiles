#+PROPERTY: header-args:bash :results verbatim

* GPG

** Installation

*** Linux

    #+begin_src bash
    echo "Intalling config for MacOS ..."
    ln -svf $(pwd)/linux/*.conf ${HOME}/.gnupg
    #+end_src



*** MacOS
    :PROPERTIES:
    :CUSTOM_ID: macos-gpg-config
    :END:

**** Review current GPG Agent config

     <<review-current>>
    
     #+begin_src bash
       tree ~/.gnupg | grep ".conf"
     #+end_src
   
       #+RESULTS:
       : ├── gpg-agent.conf -> /Users/pgpb.padilla/dotfiles/gpg/macos/gpg-agent.conf
       : ├── gpg-agent.conf~
       : ├── gpg.conf -> /Users/pgpb.padilla/dotfiles/gpg/macos/gpg.conf

     and ensure you're not overwriting useful changes:

     #+begin_src bash
       cat ~/.gnupg/*.conf
     #+end_src

       #+RESULTS:
       : # https://emacs.stackexchange.com/a/68304/11978
       : allow-emacs-pinentry
       : pinentry-program /usr/local/bin/pinentry-mac
       : #ignore-invalid-option personal-aead-preferences
       : personal-aead-preferences none
   

**** Install: Not Apple Sillicon
   
     #+begin_src bash
       echo "Intalling config for MacOS ..."
       ln -svf $(pwd)/macos/*.conf ${HOME}/.gnupg
     #+end_src

     #+RESULTS:
     : Intalling config for MacOS ...
     : /Users/pgpb.padilla/.gnupg/gpg-agent.conf -> /Users/pgpb.padilla/dotfiles/gpg/macos/gpg-agent.conf
     : /Users/pgpb.padilla/.gnupg/gpg.conf -> /Users/pgpb.padilla/dotfiles/gpg/macos/gpg.conf


**** Install: Apple Sillicon:

       #+begin_src bash
         echo "Intalling config for MacOS with Apple Sillicon ..."
         ln -svf $(pwd)/macos/apple-sillicon/*.conf ${HOME}/.gnupg
       #+end_src
   
       #+RESULTS:
       : Intalling config for MacOS ...
       : /Users/pablo.padillabeltran/.gnupg//gpg-agent.conf -> /Users/pablo.padillabeltran/dotfiles/gpg/macos/gpg-agent.conf
   

**** Verify

     Only config compatible with this OS are installed, see:
     [[review-current]].

   

*** WSL2

    *WARN*: The current configuration is only valid for Ubuntu under
    WSL2. 

    Solution found: https://unix.stackexchange.com/a/655819/55912

    #+begin_src bash :results verbatim
      echo "Installing config for Linux!! ..."
      ln -svf $(pwd)/linux/*.conf ${HOME}/.gnupg/
    #+end_src

    #+RESULTS:
    : Installing config for Linux!! ...
    : /Users/pablo.padillabeltran/.gnupg//gpg-agent.conf -> /Users/pablo.padillabeltran/dotfiles/gpg/linux/gpg-agent.conf
    : /Users/pablo.padillabeltran/.gnupg//gpg.conf -> /Users/pablo.padillabeltran/dotfiles/gpg/linux/gpg.conf

